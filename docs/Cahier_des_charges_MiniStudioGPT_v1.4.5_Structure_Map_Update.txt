üß† Cahier des charges MiniStudioGPT v1.4.5
üìÇ STRUCTURE & MAP UPDATE (Cartographie automatique du projet)

------------------------------------------------------------
üéØ Objectif g√©n√©ral
Permettre √† MiniStudioGPT (et √† tout autre GPT connect√©) de construire, lire et mettre √† jour automatiquement la carte du projet (project_map.json) √† partir de la structure r√©elle des fichiers, sans surcharger le syst√®me ni bloquer la m√©moire.

------------------------------------------------------------
üöÄ Nouveaut√©s introduites en v1.4.5
- /project/structure : route pour g√©n√©rer une vue hi√©rarchique l√©g√®re du projet.
- /project/map/update : route pour actualiser project_map.json.
- Exclusion automatique des dossiers inutiles (.venv, __pycache__, node_modules, .pytest_cache).
- Enregistrement automatique dans /app/memory/project_map.json.
- Journalisation automatique dans session_audit.log.

------------------------------------------------------------
‚öôÔ∏è ROUTES √Ä CR√âER / MODIFIER

1Ô∏è‚É£ GET /project/structure
R√¥le :
Lister la structure du projet sous forme d‚Äôarborescence JSON l√©g√®re et filtr√©e.

Exemple de retour :
{
  "MiniStudio": {
    "fastapi_app": ["main.py", "endpoints_project.py"],
    "memory": ["memoire.json", "session.log", "project_map.json"],
    "tests": ["test_apply_code.py", "test_collab_flow.py"],
    "Dockerfile": null,
    "docker-compose.yml": null
  }
}

Exclusions : .venv/, __pycache__/, node_modules/, .pytest_cache/
Chemin cible : fastapi_app/endpoints_project.py ‚Üí fonction get_project_structure()

2Ô∏è‚É£ POST /project/map/update
R√¥le :
Mettre √† jour la carte du projet (project_map.json) selon la structure r√©elle.

√âtapes :
1. Appelle get_project_structure()
2. √âcrit dans /app/memory/project_map.json
3. Journalise la mise √† jour dans session_audit.log

Exemple de retour :
{
  "status": "success",
  "files_detected": 124,
  "map_path": "/app/memory/project_map.json"
}

Chemin cible : fastapi_app/endpoints_project.py ‚Üí fonction update_project_map()

------------------------------------------------------------
üíæ M√âMOIRE ET JOURNALISATION
- /app/memory/project_map.json : structure actuelle du projet
- /app/memory/session_audit.log : journal des mises √† jour
- /app/memory/session.log : r√©sum√© des op√©rations structurelles

------------------------------------------------------------
üîí S√âCURIT√â
- Lecture seule sur la structure du projet
- √âcriture autoris√©e uniquement sur /app/memory/project_map.json
- Protection contre les acc√®s hors racine
- Journalisation de tout refus

------------------------------------------------------------
üß† INT√âGRATION AVEC MiniStudioGPT
1. V√©rifie /project/memory/status
2. Appelle /project/structure
3. Appelle /project/map/update
4. Charge la nouvelle map
5. Met √† jour automatiquement apr√®s toute modification

------------------------------------------------------------
üßæ EXEMPLE DE JOURNALISATION
[MiniStudioGPT v1.4.5] 2025-11-05 18:28:40 | D√©but de g√©n√©ration de la structure du projet.
[MiniStudioGPT v1.4.5] 2025-11-05 18:29:10 | Structure analys√©e (3 dossiers, 21 fichiers).
[MiniStudioGPT v1.4.5] 2025-11-05 18:29:12 | project_map.json mis √† jour avec succ√®s.

------------------------------------------------------------
üß© √âL√âMENTS √Ä LIVRER
- fastapi_app/endpoints_project.py : ajout des routes get_project_structure() et update_project_map()
- project_structure.txt : fichier optionnel
- memory/project_map.json : g√©n√©r√© automatiquement
- memory/session_audit.log : journal enrichi

------------------------------------------------------------
üìÖ Version interne
- Version backend : v1.4.5
- Nom du module : Structure & Map Update
- Mainteneur : PulsR / CodeGPT
- Statut : En d√©veloppement
- Compatibilit√© : MiniStudioGPT ‚â• v2.1
- √âtape suivante : v1.4.6 ‚Äì Module Cortex et int√©gration cognitive
